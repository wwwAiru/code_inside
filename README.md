   Согласно задаче, разработал серверную часть веб-приложения сохранения заметок, поддерживающую авторизацию по логину-паролю, персонализированный доступ с
разделением по ролям (ADMIN, USER). Пользователь имеет возможность создавать, обновлять и удалять свои заметки. Заметка состоит из заголовка, даты создания,
даты обновления и текста заметки. Каждое сохранение обновляет карточку заметки, сохраняя историю версий. Пользователь может сменить пароль. Администратор имеет
все возможности пользователя, а так же изменять и удалять пользователей системы. Разработанный функционал покрыт тестами.
____________________________________________
База данных используется postgresql, для тестов h2, для миграций liquibase. Для того чтобы приложение запустилось, в postgres необходимо создать базу данных "notes",
пользователь и пароль: postgres. После запуска приложения (ru.golikov.notes.Application) создадутся все необходимые таблицы, а также создадутся две роли 
ROLE_ADMIN и ROLE_USER и учётка администратора. Данные для логина под администратором: почта <b>admin@mail.ru</b>, пароль <b>admin</b>.

Приложении содержит три контроллера: AuthController, NoteController, AdminController. AuthController - доступ к неу открыт без авторизации, так как он содержит эндпоинты
для регистрации, смены пароля, авторизации(получения jwt токена).
____________________________________________
Демонстрация функционала через Swagger, ниже со скринами. 
____________________________________________
 <b>Регистрация.</b>
 ============================================
 Регистрация находиться в auth контроллере. 
____________________________________________



![image](https://user-images.githubusercontent.com/92391770/205524608-052de309-6507-4623-b3df-0a82c1e92624.png)

Для регистрации Достаточно заполнить Ф.И.О. почту и пароль в тело POST запроса на эндпоинт http://localhost:8080/auth/register пример: 

{<br>
"first_name":"Алексей",<br>
"last_name":"Юнаев",<br>
"middle_name":"Викторович",<br>
"email":"unlink@mail.ru",<br>
"password":"22222222"<br>
}

получили в ответ созданного пользователя:

![image](https://user-images.githubusercontent.com/92391770/205525820-457d188f-c588-4c2d-acdb-51e0aeb6b3ec.png)
____________________________________________

<b>Смена пароля.</b>
============================================
В auth контроллере можно сменить пароль, для этого необходимо заполнить почту, старый пароль, новый пароль в тело PUT запроса на эндпоинт 
http://localhost:8080/auth/password/change. Если аутентификация прошла успешно, пароль сменится. 

<b>Тело запроса:</b> 

{<br>
  "email": "unlink@mail.ru",<br>
  "password": "22222222",<br>
  "new_password": "33333333"<br>
}

![image](https://user-images.githubusercontent.com/92391770/205526735-6a1a4458-fb17-4565-8d6b-8082a478d45e.png)


<b>ответ:</b> 

![image](https://user-images.githubusercontent.com/92391770/205526801-e193a82c-0852-40c6-a310-1fcef2052231.png)
____________________________________________
Авторизация, получение токена доступа.
============================================
Это последний не защищённый эндпоинт, доступ к которому осучествляется без jwt токена.

Отправив POST запрос, на эндпоинт http://localhost:8080/auth/login, с почтой и паролем в теле, получаем токен доступа к защищенным ресурсам.

{<br>
  "email": "unlink@mail.ru",<br>
  "password": "33333333"<br>
}

<b>Запрос:</b>

![image](https://user-images.githubusercontent.com/92391770/205527895-d6b5ac7b-b0c8-4529-a1fc-9132f19c1813.png)

<b>ответ:</b>

![image](https://user-images.githubusercontent.com/92391770/205528094-b9263ba4-e360-42b5-b03b-7b37da8894a0.png)

____________________________________________

Авторизация в Swagger.
============================================
На главной странице swagger-ui нажимаем кнопку с замком Authorize и в модальном окне в поле "Value" вписываем слово Bearer и токен через пробел.

![image](https://user-images.githubusercontent.com/92391770/205529001-cd386412-7a1e-4170-8c50-701949eb768f.png)

После этого наш токен будет добавляться к каждому запросу в заголовке Authorization.

____________________________________________

Управление заметками.
============================================
За управление заметками отвечает NoteController.

Теперь, когда токен получен, можно создать первую заметку. Традиционно для создания, используем POST запрос с телом заметки, в котором достаточно указать только Заголовок и текст заметки, или не указывать). http://localhost:8080/notes/create

{<br>
  "title": "Первая заметка",<br>
  "body": ""<br>
}

<b>Запрос:</b>

![image](https://user-images.githubusercontent.com/92391770/205529625-9698e48d-484e-407f-82aa-80d8dc8971e4.png)

<b>ответ:</b>

![image](https://user-images.githubusercontent.com/92391770/205529676-5630f40f-a840-4fd2-8e8d-16ae0cbaea99.png)

____________________________________________

Управление заметками. Редактирование.
============================================
Для того чтобы отредактировать заметку, отправить PUT запрос на http://localhost:8080/notes/edit с телом, в теле обязательно указать id заметки, иначе ничего не выйдет), заголовок и текст(опционально).

{<br>
  "id": 1,<br>
  "title": "Напоминание",<br>
  "body": "После работы купить хлеб"<br>
}<br>

<b>Запрос:</b>

![image](https://user-images.githubusercontent.com/92391770/205531958-85339765-e928-4db2-82e7-dfdd7069f9d4.png)

<b>ответ:</b>

![image](https://user-images.githubusercontent.com/92391770/205531996-4ea57d01-226e-44aa-8e89-54f4e59bd840.png)

____________________________________________
Управление заметками. Поучить все заметки.
============================================
Чтобы получить список всех заметок, отправить GET запрос http://localhost:8080/notes/all с параметрами page и size. Заметок может быть большое количество, поэтому применяется постраничная выгрузка. Для примера зададим page 0, size 1.

![image](https://user-images.githubusercontent.com/92391770/205589736-12d9591e-27d0-4f95-9376-1617831e170f.png)

<b>Ответ: </b>

![image](https://user-images.githubusercontent.com/92391770/205590460-5305f7ad-27e6-43fd-b1d5-4b4852951822.png)

____________________________________________
Управление заметками. Удалить заметку.
============================================

Чтобы удалить заметку, отправить DELETE запрос http://localhost:8080/notes/delete в параметре указать id удаляемой заметки. Заметка удалится только у владельца, то есть обладателя токека авторизации, чужую заметку удалить нельзя.

![image](https://user-images.githubusercontent.com/92391770/205593954-2773d5cf-80b6-4500-875d-b0309a62eedf.png)

<b>Ответ: </b>

![image](https://user-images.githubusercontent.com/92391770/205594134-0b81916e-1ed7-48c1-8871-fd9d42a9fd88.png)

____________________________________________
Управление заметками. Аудит.
============================================
Чтобы посмотреть историю изменений заметки, отправить GET запрос http://localhost:8080/notes/audit с параметрами id заметки и булевым параметром fetchChanges - выгружать ли дополнительную информацию об изменениях.

![image](https://user-images.githubusercontent.com/92391770/205596538-b8d16e5b-d86e-4168-9337-74d9c5bd7c43.png)

<b>Ответ: </b>

![image](https://user-images.githubusercontent.com/92391770/205596883-04ff4923-2960-4a20-9732-bff0f213b6eb.png)

____________________________________________
Администрирование пользователей.
============================================
При первом запуске приложения, аккаунт администратора уже находится в базе данных, нужно получить токен с правами администратора и можно управлять пользователями так же легко как и заметками.

{<br>
  "email": "admin@mail.ru",<br>
  "password": "admin"<br>
}<br>

![image](https://user-images.githubusercontent.com/92391770/205598485-afae1a9d-ce87-4d2e-ae29-f4c3e8d8b83a.png)

<b>Ответ: </b>

![image](https://user-images.githubusercontent.com/92391770/205599140-673841d9-987f-43e0-8d09-0d59a7dfce65.png)

____________________________________________
Далее, используя токен, можем получить список пользователей, одного пользователя по id, отредактировать или удалить пользователя.
____________________________________________

Примеры на скриншотах:

![image](https://user-images.githubusercontent.com/92391770/205599728-c75fbe93-2e23-41fd-bcb9-fbb23dcfaf22.png)

![image](https://user-images.githubusercontent.com/92391770/205600315-ae1456b5-d3fb-4b51-bdfb-54640bf4627f.png)

![image](https://user-images.githubusercontent.com/92391770/205601436-cca110d0-9527-4f9a-8c46-3ac315300645.png)

![image](https://user-images.githubusercontent.com/92391770/205601597-788babb5-5393-409c-a0b2-f00f27bb4a03.png)








